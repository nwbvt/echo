{"version":3,"sources":["nwbvt/echo/game.cljs"],"mappings":";AAEA;;;;8BAAA,9BAAMA,oEAGHC,EAAEC,QAAQC,OAAOC,QAAQC;AAH5B,AAIE,GAAI,CAAGF,SAAO,AAACG,gBAAML;AACnB,IAAMM,IAAE,6CAAA,7CAACC;IACHC,QAAM,AAACC,4CAAIT,EAAE,UAAA,TAAKE;IAClBQ,SAAO,+CAAA,WAAAC,1DAACC;AAAD,AAAS,oDAAAD,7CAACE,8DAAIL;GAAOR;AAFlC,AAGE,GACE,CAAIM,KAAEH;AAASK;;AADjB,GAEE,EAAK,CAAIF,KAAE,CAAGH,UAAQC,iBAAY,CAAA,MAAK,AAACC,gBAAMK;AAAU,OAACI,mBAASJ;;AAFpE,AAGW,OAACI,mBAAS,+CAAA,WAAAC,1DAACH;AAAD,AAAS,oDAAAG,7CAACF,8DAAIL;GAAOP;;;;;AAC5C,OAACa,mBAASb;;;AAEd;;;mCAAA,nCAAMe,8EAEHhB,EAAEC,QAAQC,OAAOC,QAAQC,UAAUa;AAFtC,AAGE,OAACC,6CAAK,AAACC,6CAAK,CAAGjB,SAAOe,eAAejB,GAC/B,AAACD,4BAAYC,EAAEC,QAAQC,OAAOC,QAAQC;;AAE9C;;;iCAAA,jCAAMgB,0EAEHpB,EAAEE;AAFL,AAGE,GAAI,CAAIA,UAAO,AAACG,gBAAML;AAAtB;;AAEE,OAACa,6CAAE,AAACQ,gBAAMrB,GAAG,AAACS,4CAAIT,EAAEE","names":["nwbvt.echo.game/choose-next","s","options","window","is-echo","is-recent","cljs.core/count","r","cljs.core.rand","nback","cljs.core.nth","recent","p1__30861#","cljs.core.remove","cljs.core._EQ_","cljs.core/rand-nth","p1__30862#","nwbvt.echo.game/advance-sequence","clip-multiple","cljs.core.conj","cljs.core.take","nwbvt.echo.game/is-echo?","cljs.core/first"],"sourcesContent":["(ns nwbvt.echo.game)\n\n(defn choose-next\n  \"Choose the next option given sequence s, nback window,\n  and probabilities to pick the echo or one of the most choice\"\n  [s options window is-echo is-recent]\n  (if (< window (count s))\n    (let [r (rand 1)\n          nback (nth s (dec window))\n          recent (remove #(= % nback) s)]\n      (cond\n        (<= r is-echo) nback\n        (and (<= r (+ is-echo is-recent)) (< 0 (count recent))) (rand-nth recent)\n        :default (rand-nth (remove #(= % nback) options))))\n    (rand-nth options)))\n\n(defn advance-sequence\n  \"Advance the sequence to the next turn\"\n  [s options window is-echo is-recent clip-multiple]\n  (conj (take (* window clip-multiple) s)\n        (choose-next s options window is-echo is-recent)))\n\n(defn is-echo?\n  \"Determines whether or not the \"\n  [s window]\n  (if (>= window (count s))\n    false\n    (= (first s) (nth s window)) ))\n\n"]}