{"version":3,"sources":["nwbvt/echo/db.cljs"],"mappings":";AAGA,2BAAA,2CAAA,6DAAA,nIAAKA;AAIL,gCAAA,hCAAKC;AAEL,2BAAA,3BAAMC;AAAN,AAEE,OAACC,SACC,iBAAAC,mBAAI,AAAUC,qBACJJ;AADV,AAAA,oBAAAG;AAAAA;;AAAA;;;;AAGJ,2BAAA,3BAAME,8DACHC;AADH,AAEE,IAAMC,eAAa,AAACN;AAApB,AACE,GAAI,CAAGK,QAAMC;AACX,OAAUH,qBACAJ,8BACAM;;AAHZ;;;AAKJ,uBAAA,vBAACE,yFAEC,WAAKC,KAAKC;AAAV,AACE,0DAAA,nDAACC,8CAAMF,uEAEA,AAACR","names":["nwbvt.echo.db/default-db","nwbvt.echo.db/local-store-key","nwbvt.echo.db/high-score","js/parseInt","or__5045__auto__","js/localStorage","nwbvt.echo.db/save-score","score","current-high","re-frame.core/reg-cofx","cofx","_","cljs.core.assoc"],"sourcesContent":["(ns nwbvt.echo.db\n  (:require [re-frame.core :as rf]))\n\n(def default-db\n  {:running? false\n   })\n\n(def local-store-key \"nwbvt.echo.high-score\")\n\n(defn high-score\n  []\n  (js/parseInt\n    (or (.getItem js/localStorage\n              local-store-key) 0)))\n\n(defn save-score\n  [score]\n  (let [current-high (high-score)]\n    (if (> score current-high)\n      (.setItem js/localStorage\n                local-store-key\n                score))))\n\n(rf/reg-cofx\n  :high-score\n  (fn [cofx _]\n    (assoc cofx\n           :high-score\n           (high-score))))\n"]}